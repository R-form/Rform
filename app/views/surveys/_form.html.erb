<div data-controller = "survey-style" class="flex justify-center bg-green-200">
  <aside data-controller="slideover" data-slideover-target="closeAside" class="hidden slideover sm:w-1/5 absolute right-0 bg-gentleYellow h-full" style="top:186px">
        <div class="px-2 py-4 w-full">
          <div  class="right-2 top-2 cursor-pointer flex justify-between">
            <div>
              <i class="fas fa-brush"></i>
              <span class="mx-4 font-bold text-xl	">自訂主題</span>
            </div>
              <div data-action="click->slideover#close">
                <i class="fas fa-times-circle"></i>
              </div>
          </div>
          <nav>
            <ul class="my-4 flex flex-col overflow-hidden space-y-2">
              <li>             
                  <div class="h-8 mx-4">
                    <i class="fas fa-font"></i>
                    <span>
                      字體樣式
                    </span>
                  </div>          
              </li> 
              <li>
                 <%= form_with(model: survey, class: survey.font_style ) do |form| %>
                    <div class="mx-4" > 
                        <%= form.select :font_style,
                            options_for_select([['請選擇字體', 'nill' ],['font-sans(default)', 'font-sans'],['font-serif','font-serif'], ['font-mono', 'font-mono']],
                            selected: form.object.font_style ),
                            {},
                            data: { action: "change -> survey-style#select_font"}    %>
                      </div> 
                  <% end %> 
              </li>
              <li>             
                  <div class="h-8 mx-4">
                    <i class="fas fa-font"></i>
                    <span>
                      主題顏色
                    </span>
                  </div>          
              </li> 
              <li>
                  <button class="mx-4" data-action="click-> survey-style#pick_color" >
                      <input class="text-input" data-survey-style-target="color" />
                  </button>
              </li>
            </ul>
          </nav>
        </div>
  </aside>
  <section class="formsection <%= survey.font_style %>">
    <%= form_with(model: survey,  data: { controller: "auto-save", auto_save_target: "form", survey_style_target: "form", class: "formbody" } ) do |form| %>
      <div class="form fields" data-id="<%= survey.id %>" data-auto-save-target="survey_id" data-survey-style-target="survey_id">
        <%= form.text_field :title, placeholder: "問卷標題", class: "title input", 
          data: {action: "change->auto-save#add_survey_title "}%>
        <%= form.text_area :description, placeholder: "問卷敘述", class: "input",
          data: {controller: "textarea-autogrow", action: "change->auto-save#add_survey_description "} %>
      </div>
      <div data-controller="nested-form sortable-question" data-nested-form-index-value ="QUESTION_RECORD" >
        <template data-nested-form-target='template'>
          <%= form.fields_for :questions, Question.new, child_index: 'QUESTION_RECORD' do |question| %>
            <%= render 'question_fields', form: question %>
          <% end %> 
        </template>
          <%= form.fields_for :questions do |question| %>
            <%= render 'question_fields', form: question %>
          <% end %>
          <div data-nested-form-target="add_item" class="fields down">
            <%= link_to "新增問題", "#", data: { action: "nested-form#add_association auto-save#add_question_item" }, class: "btn" %>
            <%= form_with(model: survey) do |form| %>
              <%= form.file_field :image %>
              <%= form.submit "更換圖片" %>
            <% end %>
          </div>
      </div>
    <% end %>
  </section>
</div>
